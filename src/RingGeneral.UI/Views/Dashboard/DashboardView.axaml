<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:RingGeneral.UI.ViewModels.Dashboard"
             mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
             x:Class="RingGeneral.UI.Views.Dashboard.DashboardView"
             x:DataType="vm:DashboardViewModel">

    <Design.DataContext>
        <vm:DashboardViewModel />
    </Design.DataContext>

    <ScrollViewer>
        <StackPanel Margin="30" Spacing="25">
            <!-- En-tÃªte -->
            <StackPanel Spacing="8">
                <TextBlock Text="ðŸ  TABLEAU DE BORD" FontSize="28" FontWeight="Bold" Foreground="{StaticResource TextPrimaryBrush}"/>
                <TextBlock Text="{Binding CompanyName}" FontSize="18" Foreground="{StaticResource TextSecondaryBrush}"/>
                <TextBlock Text="{Binding CurrentDateFormatted}" FontSize="16" Foreground="{StaticResource TextSecondaryBrush}" FontWeight="SemiBold"/>
                <TextBlock FontSize="12" Foreground="{StaticResource TextDisabledBrush}">
                    <TextBlock.Text>
                        <MultiBinding StringFormat="Jour {0}">
                            <Binding Path="CurrentDay"/>
                        </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </StackPanel>

            <!-- Cartes de statistiques -->
            <Grid ColumnDefinitions="*,*,*,*,*">
                <!-- Workers -->
                <Border Grid.Column="0" Background="{StaticResource BackgroundSecondaryBrush}" Padding="20" CornerRadius="8" Margin="0,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ¤¼ WORKERS" FontSize="12" Foreground="{StaticResource TextSubtleBrush}" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding TotalWorkers}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource AccentBlueBrush}"/>
                        <TextBlock Text="Roster total" FontSize="11" Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Storylines -->
                <Border Grid.Column="1" Background="{StaticResource BackgroundSecondaryBrush}" Padding="20" CornerRadius="8" Margin="6,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ“– STORYLINES" FontSize="12" Foreground="{StaticResource TextSubtleBrush}" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding ActiveStorylines}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource AccentOrangeBrush}"/>
                        <TextBlock Text="Actives" FontSize="11" Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Shows -->
                <Border Grid.Column="2" Background="{StaticResource BackgroundSecondaryBrush}" Padding="20" CornerRadius="8" Margin="6,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ“º SHOWS" FontSize="12" Foreground="{StaticResource TextSubtleBrush}" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding UpcomingShows}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource BrandSecondaryBrush}"/>
                        <TextBlock Text="Ã€ venir" FontSize="11" Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Morale -->
                <Border Grid.Column="3" Background="{StaticResource BackgroundSecondaryBrush}" Padding="20" CornerRadius="8" Margin="6,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="â¤ï¸ MORAL" FontSize="12" Foreground="{StaticResource TextSubtleBrush}" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="{Binding MoraleScore}" FontSize="32" FontWeight="Bold" Foreground="{StaticResource BrandAccentBrush}"/>
                            <TextBlock Text="{Binding TrendIcon}" FontSize="24" VerticalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock Text="{Binding MoraleLabel}" FontSize="11" Foreground="{StaticResource TextMutedBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Budget -->
                <Border Grid.Column="4" Background="{StaticResource SuccessDarkBrush}" Padding="20" CornerRadius="8" Margin="6,0,0,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ’° BUDGET" FontSize="12" Foreground="{StaticResource SuccessLightBrush}" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding CurrentBudgetFormatted}" FontSize="28" FontWeight="Bold" Foreground="{StaticResource SuccessLightBrush}"/>
                        <TextBlock Text="Disponible" FontSize="11" Foreground="{StaticResource SuccessLightBrush}"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Alerte de crise critique (si existante) -->
            <Border IsVisible="{Binding HasCriticalCrises}" Background="{StaticResource ErrorDarkBrush}" Padding="18,16" CornerRadius="8">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <TextBlock Text="âš ï¸" FontSize="24" VerticalAlignment="Center"/>
                    <StackPanel Spacing="4" VerticalAlignment="Center">
                        <TextBlock Text="ALERTE CRITIQUE" FontSize="13" Foreground="{StaticResource ErrorLightBrush}" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CrisisAlertMessage}" FontSize="12" Foreground="{StaticResource ErrorLightBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- DerniÃ¨re actualitÃ© -->
            <Border Background="{StaticResource BackgroundSecondaryBrush}" Padding="20" CornerRadius="8">
                <StackPanel Spacing="10">
                    <TextBlock Text="ðŸ“° DERNIÃˆRE ACTUALITÃ‰" FontSize="14" Foreground="{StaticResource TextSubtleBrush}" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding LatestNews}" FontSize="13" Foreground="{StaticResource TextSecondaryBrush}" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <!-- ActivitÃ© rÃ©cente -->
            <Border Background="{StaticResource BackgroundSecondaryBrush}" Padding="20" CornerRadius="8">
                <StackPanel Spacing="12">
                    <TextBlock Text="ðŸ“‹ ACTIVITÃ‰ RÃ‰CENTE" FontSize="14" Foreground="{StaticResource TextSubtleBrush}" FontWeight="SemiBold"/>
                    <ItemsControl ItemsSource="{Binding RecentActivity}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="{StaticResource BackgroundTertiaryBrush}" Padding="12,8" Margin="0,0,0,6" CornerRadius="6">
                                    <TextBlock Text="{Binding .}" FontSize="12" Foreground="{StaticResource TextMutedBrush}"/>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Bouton Jour Suivant -->
            <Button Content="{Binding MainButtonLabel}"
                    Command="{Binding ContinueCommand}"
                    HorizontalAlignment="Stretch"
                    Padding="20,12"
                    FontSize="16"
                    FontWeight="Bold"
                    CornerRadius="8"
                    Classes="primary"
                    Margin="0,10,0,0"/>
            
        </StackPanel>
    </ScrollViewer>

</UserControl>
