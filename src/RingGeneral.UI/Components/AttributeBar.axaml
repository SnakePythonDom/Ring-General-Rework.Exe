<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="300" d:DesignHeight="40"
             x:Class="RingGeneral.UI.Components.AttributeBar">

  <UserControl.Styles>
    <Style Selector="Border.attribute-container">
      <Setter Property="Background" Value="#2d2d2d"/>
      <Setter Property="BorderBrush" Value="#3a3a3a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="6"/>
      <Setter Property="Padding" Value="8,6"/>
    </Style>

    <Style Selector="TextBlock.attribute-label">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="Foreground" Value="#e0e0e0"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>

    <Style Selector="TextBlock.attribute-value">
      <Setter Property="FontSize" Value="13"/>
      <Setter Property="FontWeight" Value="Bold"/>
      <Setter Property="Foreground" Value="#e0e0e0"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="Margin" Value="6,0,0,0"/>
    </Style>

    <Style Selector="TextBlock.attribute-delta">
      <Setter Property="FontSize" Value="11"/>
      <Setter Property="FontWeight" Value="Bold"/>
      <Setter Property="VerticalAlignment" Value="Center"/>
      <Setter Property="Margin" Value="4,0,0,0"/>
    </Style>

    <Style Selector="TextBlock.attribute-delta.positive">
      <Setter Property="Foreground" Value="#10b981"/>
    </Style>

    <Style Selector="TextBlock.attribute-delta.negative">
      <Setter Property="Foreground" Value="#ef4444"/>
    </Style>

    <Style Selector="Border.bar-container">
      <Setter Property="Background" Value="#1a1a1a"/>
      <Setter Property="CornerRadius" Value="3"/>
      <Setter Property="Height" Value="8"/>
      <Setter Property="Margin" Value="0,4,0,0"/>
    </Style>

    <Style Selector="Border.bar-fill">
      <Setter Property="CornerRadius" Value="3"/>
      <Setter Property="Height" Value="8"/>
    </Style>

    <Style Selector="Border.bar-fill.low">
      <Setter Property="Background" Value="#ef4444"/>
    </Style>

    <Style Selector="Border.bar-fill.medium">
      <Setter Property="Background" Value="#f59e0b"/>
    </Style>

    <Style Selector="Border.bar-fill.high">
      <Setter Property="Background" Value="#10b981"/>
    </Style>
  </UserControl.Styles>

  <Border Classes="attribute-container">
    <ToolTip.Tip>
      <StackPanel MaxWidth="250">
        <TextBlock Text="{Binding AttributeName}"
                   FontWeight="Bold"
                   Margin="0,0,0,4"/>
        <TextBlock Text="{Binding Description}"
                   TextWrapping="Wrap"/>
      </StackPanel>
    </ToolTip.Tip>

    <Grid RowDefinitions="Auto,Auto">
      <!-- Header Row: Label, Value, Delta -->
      <StackPanel Grid.Row="0" Orientation="Horizontal">
        <TextBlock Classes="attribute-label"
                   Text="{Binding AttributeName}"/>
        <TextBlock Classes="attribute-value"
                   Text="{Binding Value}"/>
        <TextBlock Classes="attribute-delta positive"
                   Text="{Binding DeltaText}"
                   IsVisible="{Binding HasPositiveDelta}"/>
        <TextBlock Classes="attribute-delta negative"
                   Text="{Binding DeltaText}"
                   IsVisible="{Binding HasNegativeDelta}"/>
      </StackPanel>

      <!-- Progress Bar -->
      <Border Grid.Row="1" Classes="bar-container">
        <Border Classes="bar-fill low"
                Width="{Binding BarWidth}"
                HorizontalAlignment="Left"
                IsVisible="{Binding IsLow}"/>
        <Border Classes="bar-fill medium"
                Width="{Binding BarWidth}"
                HorizontalAlignment="Left"
                IsVisible="{Binding IsMedium}"/>
        <Border Classes="bar-fill high"
                Width="{Binding BarWidth}"
                HorizontalAlignment="Left"
                IsVisible="{Binding IsHigh}"/>
      </Border>
    </Grid>
  </Border>
</UserControl>
