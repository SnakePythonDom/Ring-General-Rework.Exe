<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="320" d:DesignHeight="600"
             x:Class="RingGeneral.UI.Components.DetailPanel">

  <UserControl.Styles>
    <Style Selector="Border.panel-container">
      <Setter Property="Background" Value="{StaticResource BackgroundSecondaryBrush}"/>
      <Setter Property="BorderBrush" Value="{StaticResource BorderLightBrush}"/>
      <Setter Property="BorderThickness" Value="1,0,0,0"/>
    </Style>

    <Style Selector="Border.panel-header">
      <Setter Property="Background" Value="{StaticResource BackgroundInputBrush}"/>
      <Setter Property="Padding" Value="16,12"/>
      <Setter Property="BorderBrush" Value="{StaticResource BorderLightBrush}"/>
      <Setter Property="BorderThickness" Value="0,0,0,1"/>
    </Style>

    <Style Selector="TextBlock.panel-title">
      <Setter Property="FontSize" Value="16"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
    </Style>

    <Style Selector="TextBlock.panel-subtitle">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
      <Setter Property="Margin" Value="0,2,0,0"/>
    </Style>

    <Style Selector="Expander.section">
      <Setter Property="Background" Value="{StaticResource BackgroundSecondaryBrush}"/>
      <Setter Property="Margin" Value="0,0,0,1"/>
    </Style>

    <Style Selector="Expander.section /template/ ToggleButton#ExpanderToggle">
      <Setter Property="Background" Value="{StaticResource BackgroundInputBrush}"/>
      <Setter Property="Padding" Value="12,8"/>
    </Style>

    <Style Selector="Expander.section /template/ ToggleButton#ExpanderToggle:pointerover">
      <Setter Property="Background" Value="{StaticResource BorderLightBrush}"/>
    </Style>

    <Style Selector="Expander.section /template/ Border#ExpanderContent">
      <Setter Property="Background" Value="{StaticResource BackgroundSecondaryBrush}"/>
      <Setter Property="Padding" Value="12"/>
    </Style>

    <Style Selector="TextBlock.section-title">
      <Setter Property="FontSize" Value="13"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
    </Style>

    <Style Selector="TextBlock.section-count">
      <Setter Property="FontSize" Value="11"/>
      <Setter Property="FontWeight" Value="Medium"/>
      <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
      <Setter Property="Margin" Value="6,0,0,0"/>
    </Style>

    <Style Selector="Border.empty-state">
      <Setter Property="Background" Value="{StaticResource BackgroundInputBrush}"/>
      <Setter Property="BorderBrush" Value="{StaticResource BorderLightBrush}"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="6"/>
      <Setter Property="Padding" Value="24"/>
      <Setter Property="Margin" Value="16"/>
    </Style>

    <Style Selector="TextBlock.empty-message">
      <Setter Property="FontSize" Value="13"/>
      <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
      <Setter Property="TextAlignment" Value="Center"/>
      <Setter Property="TextWrapping" Value="Wrap"/>
    </Style>
  </UserControl.Styles>

  <Border Classes="panel-container">
    <DockPanel>
      <!-- Header -->
      <Border DockPanel.Dock="Top" Classes="panel-header">
        <StackPanel>
          <TextBlock Classes="panel-title"
                     Text="{Binding Title}"/>
          <TextBlock Classes="panel-subtitle"
                     Text="{Binding Subtitle}"
                     IsVisible="{Binding HasSubtitle}"/>
        </StackPanel>
      </Border>

      <!-- Content -->
      <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel>
          <!-- Content from ViewModel -->
          <ContentControl Content="{Binding Content}"/>

          <!-- Empty State -->
          <Border Classes="empty-state"
                  IsVisible="{Binding IsEmpty}">
            <StackPanel Spacing="12">
              <PathIcon Data="{StaticResource InfoIcon}"
                        Width="32" Height="32"
                        Foreground="{StaticResource TextSecondaryBrush}"
                        HorizontalAlignment="Center"
                        IsVisible="{Binding !IsEmpty}"/>
              <TextBlock Classes="empty-message"
                         Text="{Binding EmptyMessage}"/>
            </StackPanel>
          </Border>
        </StackPanel>
      </ScrollViewer>
    </DockPanel>
  </Border>
</UserControl>
