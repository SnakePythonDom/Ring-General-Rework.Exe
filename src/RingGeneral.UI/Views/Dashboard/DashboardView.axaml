<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:RingGeneral.UI.ViewModels.Dashboard"
             mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
             x:Class="RingGeneral.UI.Views.Dashboard.DashboardView"
             x:DataType="vm:DashboardViewModel">

    <Design.DataContext>
        <vm:DashboardViewModel />
    </Design.DataContext>

    <ScrollViewer>
        <StackPanel Margin="30" Spacing="25">
            <!-- En-tÃªte -->
            <StackPanel Spacing="8">
                <TextBlock Text="ðŸ  TABLEAU DE BORD" FontSize="28" FontWeight="Bold" Foreground="#e0e0e0"/>
                <TextBlock Text="{Binding CompanyName}" FontSize="18" Foreground="#888888"/>
                <TextBlock FontSize="14" Foreground="#666666">
                    <TextBlock.Text>
                        <MultiBinding StringFormat="Semaine {0}">
                            <Binding Path="CurrentWeek"/>
                        </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </StackPanel>

            <!-- Cartes de statistiques -->
            <Grid ColumnDefinitions="*,*,*,*,*">
                <!-- Workers -->
                <Border Grid.Column="0" Background="#1e293b" Padding="20" CornerRadius="8" Margin="0,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ¤¼ WORKERS" FontSize="12" Foreground="#64748b" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding TotalWorkers}" FontSize="32" FontWeight="Bold" Foreground="#3b82f6"/>
                        <TextBlock Text="Roster total" FontSize="11" Foreground="#94a3b8"/>
                    </StackPanel>
                </Border>

                <!-- Storylines -->
                <Border Grid.Column="1" Background="#1e293b" Padding="20" CornerRadius="8" Margin="6,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ“– STORYLINES" FontSize="12" Foreground="#64748b" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding ActiveStorylines}" FontSize="32" FontWeight="Bold" Foreground="#f59e0b"/>
                        <TextBlock Text="Actives" FontSize="11" Foreground="#94a3b8"/>
                    </StackPanel>
                </Border>

                <!-- Shows -->
                <Border Grid.Column="2" Background="#1e293b" Padding="20" CornerRadius="8" Margin="6,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ“º SHOWS" FontSize="12" Foreground="#64748b" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding UpcomingShows}" FontSize="32" FontWeight="Bold" Foreground="#8b5cf6"/>
                        <TextBlock Text="Ã€ venir" FontSize="11" Foreground="#94a3b8"/>
                    </StackPanel>
                </Border>

                <!-- Morale -->
                <Border Grid.Column="3" Background="#1e293b" Padding="20" CornerRadius="8" Margin="6,0,6,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="â¤ï¸ MORAL" FontSize="12" Foreground="#64748b" FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="{Binding MoraleScore}" FontSize="32" FontWeight="Bold" Foreground="#06b6d4"/>
                            <TextBlock Text="{Binding TrendIcon}" FontSize="24" VerticalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock Text="{Binding MoraleLabel}" FontSize="11" Foreground="#94a3b8"/>
                    </StackPanel>
                </Border>

                <!-- Budget -->
                <Border Grid.Column="4" Background="#065f46" Padding="20" CornerRadius="8" Margin="6,0,0,0">
                    <StackPanel Spacing="8">
                        <TextBlock Text="ðŸ’° BUDGET" FontSize="12" Foreground="#d1fae5" FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding CurrentBudgetFormatted}" FontSize="28" FontWeight="Bold" Foreground="#34d399"/>
                        <TextBlock Text="Disponible" FontSize="11" Foreground="#a7f3d0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Alerte de crise critique (si existante) -->
            <Border IsVisible="{Binding HasCriticalCrises}" Background="#7f1d1d" Padding="18,16" CornerRadius="8">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <TextBlock Text="âš ï¸" FontSize="24" VerticalAlignment="Center"/>
                    <StackPanel Spacing="4" VerticalAlignment="Center">
                        <TextBlock Text="ALERTE CRITIQUE" FontSize="13" Foreground="#fecaca" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CrisisAlertMessage}" FontSize="12" Foreground="#fca5a5"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- DerniÃ¨re actualitÃ© -->
            <Border Background="#1e293b" Padding="20" CornerRadius="8">
                <StackPanel Spacing="10">
                    <TextBlock Text="ðŸ“° DERNIÃˆRE ACTUALITÃ‰" FontSize="14" Foreground="#64748b" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding LatestNews}" FontSize="13" Foreground="#cbd5e1" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <!-- ActivitÃ© rÃ©cente -->
            <Border Background="#1e293b" Padding="20" CornerRadius="8">
                <StackPanel Spacing="12">
                    <TextBlock Text="ðŸ“‹ ACTIVITÃ‰ RÃ‰CENTE" FontSize="14" Foreground="#64748b" FontWeight="SemiBold"/>
                    <ItemsControl ItemsSource="{Binding RecentActivity}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#0f172a" Padding="12,8" Margin="0,0,0,6" CornerRadius="6">
                                    <TextBlock Text="{Binding .}" FontSize="12" Foreground="#94a3b8"/>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Actions rapides -->
            <Border Background="#1e293b" Padding="20" CornerRadius="8">
                <StackPanel Spacing="12">
                    <TextBlock Text="âš¡ ACTIONS RAPIDES" FontSize="14" Foreground="#64748b" FontWeight="SemiBold"/>
                    <Grid ColumnDefinitions="*,*,*">
                        <Button Grid.Column="0" Content="âž• Nouveau Show" Padding="12,10" Background="#3b82f6" Foreground="White" CornerRadius="6" Margin="0,0,5,0"/>
                        <Button Grid.Column="1" Content="ðŸ“‹ CrÃ©er Booking" Padding="12,10" Background="#8b5cf6" Foreground="White" CornerRadius="6" Margin="5,0,5,0"/>
                        <Button Grid.Column="2" Content="â­ï¸ Semaine Suivante" Padding="12,10" Background="#059669" Foreground="White" CornerRadius="6" Margin="5,0,0,0"/>
                    </Grid>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>

</UserControl>
