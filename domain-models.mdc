# Domain Models Standards - Ring General

## ğŸ“‹ Standards ModÃ¨les de Domaine

### Records Immuables - RÃˆGLE ABSOLUE
- **TOUJOURS** utiliser `sealed record` pour tous les modÃ¨les
- **JAMAIS** utiliser `class` pour les modÃ¨les du domaine
- **JAMAIS** ajouter de logique mÃ©tier aux records

### Structure Record Standard
```csharp
public sealed record WorkerSnapshot(
    string WorkerId,
    string NomComplet,
    int InRing,
    int Entertainment,
    int Story,
    int Popularite,
    int Fatigue,
    string Blessure,
    int Momentum,
    string RoleTv,
    int Morale);
```

### PropriÃ©tÃ©s en FranÃ§ais
- **TOUJOURS** nommer les propriÃ©tÃ©s publiques en franÃ§ais (PascalCase)
- CohÃ©rent avec l'approche du projet

#### Exemples Noms Corrects
- `NomComplet` (pas `FullName`)
- `Popularite` (pas `Popularity`)
- `Fatigue` (pas `FatigueLevel`)
- `Blessure` (pas `Injury`)
- `Momentum` (pas `Momentum`)
- `Morale` (pas `Morale`)

### ImmuabilitÃ© Stricte
- **JAMAIS** de setters publics
- **JAMAIS** de champs mutables
- **JAMAIS** de mÃ©thodes qui modifient l'Ã©tat

### Constructeurs et With Expressions
```csharp
// CrÃ©ation
var worker = new WorkerSnapshot(
    WorkerId: "worker-1",
    NomComplet: "John Doe",
    InRing: 75,
    Entertainment: 80,
    Story: 70,
    Popularite: 60,
    Fatigue: 20,
    Blessure: "Aucune",
    Momentum: 5,
    RoleTv: "Face",
    Morale: 85);

// Modification (crÃ©e une nouvelle instance)
var updatedWorker = worker with { Fatigue = 25, Popularite = 65 };
```

### Types Nullable AppropriÃ©s
- Utiliser `string?` pour les valeurs optionnelles
- Utiliser `int?` pour les entiers optionnels
- **TOUJOURS** considÃ©rer si une propriÃ©tÃ© peut Ãªtre null

### Records Complexes avec Sous-Records
```csharp
public sealed record StorylineInfo(
    string StorylineId,
    string Nom,
    StorylinePhase Phase,
    int Heat,
    StorylineStatus Status,
    string? Resume,
    IReadOnlyList<StorylineParticipant> Participants);

public sealed record StorylineParticipant(
    string WorkerId,
    string Role,
    bool EstPrincipal);
```

### Collections Immuables
- Utiliser `IReadOnlyList<T>`, `IReadOnlyDictionary<TKey, TValue>`
- **JAMAIS** `List<T>`, `Dictionary<TKey, TValue>` dans les records
- Assurer l'immuabilitÃ© des collections

### Enums dans les Records
- Utiliser des enums pour les valeurs contraintes
- Enums dÃ©finis dans `RingGeneral.Core/Enums/`

```csharp
public enum StorylinePhase
{
    Setup,
    Build,
    Peak,
    Blowoff
}

public enum InjurySeverity
{
    Legere,
    Moyenne,
    Grave
}
```

### Records de RÃ©sultats d'OpÃ©rations
```csharp
public sealed record GameStateDelta(
    IReadOnlyDictionary<string, int> FatigueDelta,
    IReadOnlyDictionary<string, string> Blessures,
    IReadOnlyDictionary<string, int> MomentumDelta,
    IReadOnlyDictionary<string, int> PopulariteWorkersDelta,
    IReadOnlyDictionary<string, int> PopulariteCompagnieDelta,
    IReadOnlyDictionary<string, int> StorylineHeatDelta,
    IReadOnlyDictionary<string, int> TitrePrestigeDelta,
    IReadOnlyList<FinanceTransaction> Finances);
```

### Records de Commandes/Ã‰vÃ©nements
```csharp
public sealed record ShowSimulationResult(
    string ShowId,
    string Rapport,
    GameStateDelta Delta,
    ShowReport RapportDetaille);

public sealed record SegmentImpact(
    int NoteSegment,
    IReadOnlyDictionary<string, int> DeltaFatigue,
    IReadOnlyDictionary<string, int> DeltaMomentum,
    IReadOnlyDictionary<string, int> DeltaPopularite,
    IReadOnlyList<string> BlessuresSegment,
    IReadOnlyDictionary<string, int> DeltaHeatStoryline);
```

## ğŸ“‚ Organisation des Fichiers

### Structure RecommandÃ©e
```
src/RingGeneral.Core/Models/
â”œâ”€â”€ Workers/
â”‚   â”œâ”€â”€ WorkerSnapshot.cs
â”‚   â”œâ”€â”€ WorkerAttributes.cs
â”‚   â””â”€â”€ WorkerState.cs
â”œâ”€â”€ Shows/
â”‚   â”œâ”€â”€ ShowDefinition.cs
â”‚   â”œâ”€â”€ SegmentDefinition.cs
â”‚   â””â”€â”€ ShowReport.cs
â”œâ”€â”€ Companies/
â”‚   â”œâ”€â”€ CompanyState.cs
â”‚   â””â”€â”€ CompanyEra.cs
â”œâ”€â”€ Storylines/
â”‚   â”œâ”€â”€ StorylineInfo.cs
â”‚   â””â”€â”€ StorylineParticipant.cs
â””â”€â”€ Shared/
    â”œâ”€â”€ GameStateDelta.cs
    â””â”€â”€ FinanceTransaction.cs
```

### Un Record Par Fichier
- **TOUJOURS** un seul record par fichier
- Nom du fichier = nom du record
- Namespace correspondant au chemin du dossier

## âœ… BONNES PRATIQUES

### Validation dans les Constructeurs
- Si nÃ©cessaire, ajouter validation dans le constructeur
- Utiliser des exceptions appropriÃ©es pour les invariants mÃ©tier

### SÃ©rialisation/JSON
- Les records sont parfaits pour la sÃ©rialisation JSON
- UtilisÃ©s dans les specs JSON du projet

### Performance
- Records sont plus lÃ©gers que les classes
- Comparaison structurale automatique
- IdÃ©aux pour le caching et la distribution

## âŒ INTERDIT

- Logique mÃ©tier dans les records
- Setters publics
- Champs mutables
- Classes au lieu de records
- PropriÃ©tÃ©s en anglais (sauf IDs techniques)
- Collections mutables (`List<T>`, `Dictionary<TKey, TValue>`)
- MÃ©thodes qui modifient l'Ã©tat interne