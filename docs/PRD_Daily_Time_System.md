PRD : Moteur Temporel Quotidien & Système Financier HybrideProjet : Ring General ReworkVersion : 2.0 (Transition Day-by-Day)Priorité : CRITIQUE (Fondation du Gameplay)1.0 Vision StratégiqueTransformer la boucle de jeu hebdomadaire en une simulation quotidienne pour augmenter la granularité de la gestion (micro-management) et permettre une narration émergente (événements imprévisibles chaque jour). Intégrer un système de contrats réaliste inspiré des standards de l'industrie (Guaranti Mensuel + Bonus d'Apparition).2.0 Spécifications du Système Temporel2.1 Le Cycle de 24 Heures (The Daily Tick)Le passage du temps ne se fait plus par "Semaine" mais par pression sur un bouton "Jour Suivant".TimeOrchestratorService : Remplace le WeeklyLoopService.Routine Quotidienne :Mise à jour des États : Récupération de Stamina, réduction du temps de blessure (-1 jour).Gestion des Événements : Vérification si la date actuelle correspond à un show (TV/PPV).Simulation RNG : Calcul des incidents backstage (rumeurs, crises) pour le jour J.Simulation IA : Mouvements des compagnies concurrentes.2.2 États de Travail (Daily Activity)Chaque catcheur possède un état pour la journée en cours :Repos : Récupération maximale.Entraînement : Gain léger de stats, fatigue légère.Voyage : Fatigue moyenne (si le show de demain est loin).Show : Fatigue forte, risque de blessure, déclenchement du paiement par apparition.3.0 Spécifications Financières & Contractuelles3.1 Structure du Contrat HybrideLe système doit supporter trois types de flux monétaires pour les catcheurs :Salaire Mensuel Garanti (Fixe) :Prélevé automatiquement le dernier jour de chaque mois.Indépendant du nombre de matchs effectués.Frais d'Apparition (Variable) :Prélevé uniquement si le catcheur est sur la carte d'un show (Match ou Segment micro).Payé immédiatement après le show.Bonus Pay-Per-View (Ponctuel) :Prime supérieure pour les gros événements annuels.3.2 Modèle de Données (SQL)Mise à jour de la table Contracts :MonthlyWage (INT) : Salaire de base.AppearanceFee (INT) : Coût par show.IsExclusive (BOOL) : Si vrai, le worker ne peut pas travailler ailleurs.LastPaymentDate (DATETIME) : Pour éviter les doubles prélèvements.4.0 Architecture Technique4.1 Orchestration du CodeExtrait de codegraph TD
    A[Bouton Jour Suivant] --> B[TimeOrchestrator]
    B --> C[DailyStatUpdate: Fatigue/Injuries]
    B --> D[EventGenerator: Incidents/News]
    B --> E{Est-ce un jour de Show?}
    E -- Oui --> F[ShowSimulationEngine]
    F --> G[PayAppearanceFees]
    E -- Non --> H[Skip to Summary]
    B --> I{Est-ce la fin du mois?}
    I -- Oui --> J[ProcessMonthlyPayroll]
    J --> K[FinanceRepository: Record Expenses]
4.2 Le ShowSimulationEngine (Lien Finance)Le moteur de simulation de show doit être modifié pour notifier le FinanceService :Trigger : OnSegmentProcessed(List<WorkerId> participants)Action : Calculer la somme des AppearanceFee de tous les participants et déduire le montant du budget de la compagnie.5.0 Interface Utilisateur (UI/UX)5.1 Dashboard (ShellView)Date Widget : Affichage "Lundi 12 Janvier 2026".Timeline : Barre horizontale montrant les icônes des événements sur les 7 prochains jours.Daily Log : Liste déroulante des événements survenus pendant la nuit (ex: "Le contrat de X expire dans 30 jours", "Y est guéri").5.2 Finance ViewGraphique de Flux : Visualisation des dépenses quotidiennes (pics lors des jours de show).Projections : "Dépenses fixes prévues à la fin du mois : $50,000".6.0 Analyse de Risques & AtténuationRisqueImpactSolutionFaillite RapideÉlevéAlerte "Budget Critique" si le joueur booke trop de stars à l'apparition.Lenteur de simulationMoyenSimuler les jours "vides" (sans show) en moins de 500ms.Complexité SQLMoyenUtiliser des transactions pour s'assurer que le salaire mensuel est payé en une seule fois.7.0 Prochaines Étapes pour le DéveloppementMigration DB : Ajouter les colonnes de salaire mensuel et d'apparition.Logic Core : Créer le TimeOrchestrator et désactiver l'ancien WeeklyLoop.Finance Link : Connecter le ShowSimulationEngine au FinanceRepository.UI Refresh : Créer le bouton "Next Day" et le log quotidien.
